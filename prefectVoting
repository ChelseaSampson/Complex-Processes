txt = open("votingData.csv","r")
class Person:
  def __init__(self, email, headGirl, deputy, prefectVotes):
    self.email = email
    self.headGirl = headGirl
    self.deputy = deputy
    self.prefectVotes = prefectVotes

class Teacher(Person):
  pass

class Student(Person):
  pass

isItTheFirstLine = True
listOfVoters = []
listOfStudents = []
listOfTeachers = []

#Step 1: Store the voting data in a list
for x in txt:
  if not isItTheFirstLine:
    y = str(x)
    z = y.split("\"")
    a = z[9]
    b = a.split (";")
    if z[3][1].isdigit():
      student = Student(z[3],z[5],z[7], b)
      listOfVoters.append(student)
      listOfStudents.append(student)
    else:
      teacher = Teacher(z[3], z[5], z[7], b)
      listOfVoters.append(teacher)
      listOfTeachers.append(teacher)
  else:
    isItTheFirstLine = False

#Step 2: Analyse said data, and tally up the votes
headGirlVotes = {}
for x in listOfVoters:
  if x.headGirl in headGirlVotes:
    headGirlVotes[x.headGirl] += 1
  else:
    headGirlVotes[x.headGirl] = 1

headGirlVotesByStudents = {}
for x in listOfStudents:
  if x.headGirl in headGirlVotesByStudents:
    headGirlVotesByStudents[x.headGirl] += 1
  else:
    headGirlVotesByStudents[x.headGirl] = 1

headGirlVotesByTeachers = {}
for x in listOfTeachers:
  if x.headGirl in headGirlVotesByTeachers:
    headGirlVotesByTeachers[x.headGirl] += 1
  else:
    headGirlVotesByTeachers[x.headGirl] = 1

deputyVotes = {}
for x in listOfVoters:
  if x.deputy!=x.headGirl:
    if x.deputy in deputyVotes:
      deputyVotes[x.deputy] += 1
    else:
      deputyVotes[x.deputy] = 1

deputyVotesByStudents = {}
for x in listOfStudents:
  if x.deputy != x.headGirl:
    if x.deputy in deputyVotesByStudents:
      deputyVotesByStudents[x.deputy] += 1
    else:
      deputyVotesByStudents[x.deputy] = 1

deputyVotesByTeachers = {}
for x in listOfTeachers:
  if x.deputy != x.headGirl:
    if x.deputy in deputyVotesByTeachers:
      deputyVotesByTeachers[x.deputy] += 1
    else:
      deputyVotesByTeachers[x.deputy] = 1

prefectVotesDict = {}
for x in listOfVoters:
  for z in x.prefectVotes:
    if z != x.headGirl and z != x.deputy:
      if z in prefectVotesDict:
        prefectVotesDict[z] += 1
      else:
        prefectVotesDict[z] = 1

prefectVotesDictByStudents = {}
for x in listOfStudents:
  if z != x.headGirl and z != x.deputy:
    for z in x.prefectVotes:
      if z in prefectVotesDictByStudents:
        prefectVotesDictByStudents[z] += 1
      else:
        prefectVotesDictByStudents[z] = 1

prefectVotesDictByTeachers = {}
for x in listOfTeachers:
  if z != x.headGirl and z != x.deputy:
    for z in x.prefectVotes:
      if z in prefectVotesDictByTeachers:
        prefectVotesDictByTeachers[z] += 1
      else:
        prefectVotesDictByTeachers[z] = 1

#Step 3: Show the amount of times people got voted for
print("Head Girl Votes By Students:")
sortedList = sorted(headGirlVotesByStudents.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Deputy Votes By Students:")
sortedList = sorted(deputyVotesByStudents.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Prefect Votes By Students:")
sortedList = sorted(prefectVotesDictByStudents.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Head Girl Votes By Teachers:")
sortedList = sorted(headGirlVotesByTeachers.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Deputy Votes By Teachers:")
sortedList = sorted(deputyVotesByTeachers.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Prefect Votes By Teachers:")
sortedList = sorted(prefectVotesDictByTeachers.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Head Girl Votes:")
sortedList = sorted(headGirlVotes.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Deputy Votes:")
sortedList = sorted(deputyVotes.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

print("Prefect Votes:")
sortedList = sorted(prefectVotesDict.items(), key=lambda l: l[1], reverse=True)
for x in sortedList:
  print(x[0])
  print(x[1])

txt.close()
